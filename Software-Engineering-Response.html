
<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8" />
<meta name="generator" content="LaTeX Lwarp package" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!--[if lt IE 9]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<title>main — Software Engineering Response</title>
<link rel="stylesheet" type="text/css" href="sans-serif-lwarp-sagebrush.css" />

<script>
// Lwarp MathJax emulation code
//
// Based on code by Davide P. Cervone.
// Equation numbering: https://github.com/mathjax/MathJax/issues/2427
// Starred and ifnextchar macros: https://github.com/mathjax/MathJax/issues/2428
// \left, \right delimiters: https://github.com/mathjax/MathJax/issues/2535
//
// Modified by Brian Dunn to adjust equation numbering and add subequations.
//
// LaTeX can use \seteqnumber{subequations?}{section}{number} before each equation.
// subequations? is 0 usually, 1 if inside subequations.
// section is a string printed as-is, or empty.
// number is auto-incremented by MathJax between equations.
//
MathJax = {
    subequations: "0",
    section: "",
    loader: {
        load: ['[tex]/tagformat', '[tex]/textmacros'],
    },
    startup: {
        ready() {
            //      These would be replaced by import commands if you wanted to make
            //      a proper extension.
            const Configuration = MathJax._.input.tex.Configuration.Configuration;
            const CommandMap = MathJax._.input.tex.SymbolMap.CommandMap;
            const Macro = MathJax._.input.tex.Symbol.Macro;
            const TexError = MathJax._.input.tex.TexError.default;
            const ParseUtil = MathJax._.input.tex.ParseUtil.default;
            const expandable = MathJax._.util.Options.expandable;


            //      Insert the replacement string into the TeX string, and check
            //      that there haven't been too many maxro substitutions (prevents
            //      infinite loops).
            const useArgument = (parser, text) => {
                parser.string = ParseUtil.addArgs(parser, text, parser.string.slice(parser.i));
                parser.i = 0;
                if (++parser.macroCount > parser.configuration.options.maxMacros) {
                    throw new TexError('MaxMacroSub1',
                    'MathJax maximum macro substitution count exceeded; ' +
                    'is there a recursive macro call?');
                }
            }


            //      Create the command map for:
            //          \ifstar, \ifnextchar, \ifblank, \ifstrequal, \gsub, \seteqnumber
            new CommandMap('Lwarp-macros', {
                ifstar: 'IfstarFunction',
                ifnextchar: 'IfnextcharFunction',
                ifblank: 'IfblankFunction',
                ifstrequal: 'IfstrequalFunction',
                gsubstitute: 'GsubstituteFunction',
                seteqnumber: 'SeteqnumberFunction'
            }, {
                //      This function implements an ifstar macro.
                IfstarFunction(parser, name) {
                    const resultstar = parser.GetArgument(name);
                    const resultnostar = parser.GetArgument(name);
                    const star = parser.GetStar();                      // true if there is a *
                    useArgument(parser, star ? resultstar : resultnostar);
                },


                //      This function implements an ifnextchar macro.
                IfnextcharFunction(parser, name) {
                    let whichchar = parser.GetArgument(name);
                    if (whichchar.match(/^(?:0x[0-9A-F]+|[0-9]+)$/i)) {
                        // $ syntax highlighting
                        whichchar = String.fromCodePoint(parseInt(whichchar));
                    }
                    const resultnextchar = parser.GetArgument(name);
                    const resultnotnextchar = parser.GetArgument(name);
                    const gotchar = (parser.GetNext() === whichchar);
                    useArgument(parser, gotchar ? resultnextchar : resultnotnextchar);
                },


                // This function implements an ifblank macro.
                IfblankFunction(parser, name) {
                    const blankarg = parser.GetArgument(name);
                    const resultblank = parser.GetArgument(name);
                    const resultnotblank = parser.GetArgument(name);
                    const isblank = (blankarg.trim() == "");
                    useArgument(parser, isblank ? resultblank : resultnotblank);
                },


                // This function implements an ifstrequal macro.
                IfstrequalFunction(parser, name) {
                    const strequalfirst = parser.GetArgument(name);
                    const strequalsecond = parser.GetArgument(name);
                    const resultequal = parser.GetArgument(name);
                    const resultnotequal = parser.GetArgument(name);
                    const isequal = (strequalfirst == strequalsecond);
                    useArgument(parser, isequal ? resultequal : resultnotequal);
                },


                // This function implements a gsub macro.
                GsubstituteFunction(parser, name) {
                    const gsubfirst = parser.GetArgument(name);
                    const gsubsecond = parser.GetArgument(name);
                    const gsubthird = parser.GetArgument(name);
                    let gsubresult=gsubfirst.replace(gsubsecond, gsubthird);
                    useArgument(parser, gsubresult);
                },


                //      This function modifies the equation numbers.
                SeteqnumberFunction(parser, name) {
                        //   Get the macro parameters
                        const star = parser.GetStar();                    // true if there is a *
                        const optBrackets = parser.GetBrackets(name);     // contents of optional brackets
                        const newsubequations = parser.GetArgument(name);    // the subequations argument
                        const neweqsection = parser.GetArgument(name);    // the eq section argument
                        const neweqnumber = parser.GetArgument(name);     // the eq number argument
                        MathJax.config.subequations=newsubequations ;     // a string with boolean meaning
                        MathJax.config.section=neweqsection ;             // a string with numeric meaning
                        parser.tags.counter = parser.tags.allCounter = neweqnumber ;
                }


            });


            //      Create the Lwarp-macros package
            Configuration.create('Lwarp-macros', {
                handler: {macro: ['Lwarp-macros']}
            });


            MathJax.startup.defaultReady();


            // For forward references:
            MathJax.startup.input[0].preFilters.add(({math}) => {
                if (math.inputData.recompile){
                        MathJax.config.subequations = math.inputData.recompile.subequations;
                        MathJax.config.section = math.inputData.recompile.section;
                }
            });
            MathJax.startup.input[0].postFilters.add(({math}) => {
                if (math.inputData.recompile){
                        math.inputData.recompile.subequations = MathJax.config.subequations;
                        math.inputData.recompile.section = MathJax.config.section;
                }
            });


                // For \left, \right with unicode-math:
                const {DelimiterMap} = MathJax._.input.tex.SymbolMap;
                const {Symbol} = MathJax._.input.tex.Symbol;
                const {MapHandler} = MathJax._.input.tex.MapHandler;
                const delimiter = MapHandler.getMap('delimiter');
                delimiter.add('\\lBrack', new Symbol('\\lBrack', '\u27E6'));
                delimiter.add('\\rBrack', new Symbol('\\rBrack', '\u27E7'));
                delimiter.add('\\lAngle', new Symbol('\\lAngle', '\u27EA'));
                delimiter.add('\\rAngle', new Symbol('\\rAngle', '\u27EB'));
                delimiter.add('\\lbrbrak', new Symbol('\\lbrbrak', '\u2772'));
                delimiter.add('\\rbrbrak', new Symbol('\\rbrbrak', '\u2773'));
                delimiter.add('\\lbag', new Symbol('\\lbag', '\u27C5'));
                delimiter.add('\\rbag', new Symbol('\\rbag', '\u27C6'));
                delimiter.add('\\llparenthesis', new Symbol('\\llparenthesis', '\u2987'));
                delimiter.add('\\rrparenthesis', new Symbol('\\rrparenthesis', '\u2988'));
                delimiter.add('\\llangle', new Symbol('\\llangle', '\u2989'));
                delimiter.add('\\rrangle', new Symbol('\\rrangle', '\u298A'));
                delimiter.add('\\Lbrbrak', new Symbol('\\Lbrbrak', '\u27EC'));
                delimiter.add('\\Rbrbrak', new Symbol('\\Rbrbrak', '\u27ED'));
                delimiter.add('\\lBrace', new Symbol('\\lBrace', '\u2983'));
                delimiter.add('\\rBrace', new Symbol('\\rBrace', '\u2984'));
                delimiter.add('\\lParen', new Symbol('\\lParen', '\u2985'));
                delimiter.add('\\rParen', new Symbol('\\rParen', '\u2986'));
                delimiter.add('\\lbrackubar', new Symbol('\\lbrackubar', '\u298B'));
                delimiter.add('\\rbrackubar', new Symbol('\\rbrackubar', '\u298C'));
                delimiter.add('\\lbrackultick', new Symbol('\\lbrackultick', '\u298D'));
                delimiter.add('\\rbracklrtick', new Symbol('\\rbracklrtick', '\u298E'));
                delimiter.add('\\lbracklltick', new Symbol('\\lbracklltick', '\u298F'));
                delimiter.add('\\rbrackurtick', new Symbol('\\rbrackurtick', '\u2990'));
                delimiter.add('\\langledot', new Symbol('\\langledot', '\u2991'));
                delimiter.add('\\rangledot', new Symbol('\\rangledot', '\u2992'));
                delimiter.add('\\lparenless', new Symbol('\\lparenless', '\u2993'));
                delimiter.add('\\rparengtr', new Symbol('\\rparengtr', '\u2994'));
                delimiter.add('\\Lparengtr', new Symbol('\\Lparengtr', '\u2995'));
                delimiter.add('\\Rparenless', new Symbol('\\Rparenless', '\u2996'));
                delimiter.add('\\lblkbrbrak', new Symbol('\\lblkbrbrak', '\u2997'));
                delimiter.add('\\rblkbrbrak', new Symbol('\\rblkbrbrak', '\u2998'));
                delimiter.add('\\lvzigzag', new Symbol('\\lvzigzag', '\u29D8'));
                delimiter.add('\\rvzigzag', new Symbol('\\rvzigzag', '\u29D9'));
                delimiter.add('\\Lvzigzag', new Symbol('\\Lvzigzag', '\u29DA'));
                delimiter.add('\\Rvzigzag', new Symbol('\\Rvzigzag', '\u29DB'));
                delimiter.add('\\lcurvyangle', new Symbol('\\lcurvyangle', '\u29FC'));
                delimiter.add('\\rcurvyangle', new Symbol('\\rcurvyangle', '\u29FD'));
                delimiter.add('\\Vvert', new Symbol('\\Vvert', '\u2980'));
        }        // ready
    },           // startup


    tex: {
        packages: {'[+]': ['tagformat', 'Lwarp-macros', 'textmacros']},
        tags: "ams",
                tagformat: {
                        number: function (n) {
                             if(MathJax.config.subequations==0)
                                 return(MathJax.config.section + n);
                             else
                                 return(MathJax.config.section + String.fromCharCode(96+n));
                        },
                },
    }
}
</script>


<script
        id="MathJax-script"
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"
></script>

</head>
<body>


<a id="main-autopage-97"></a>


<div class="bodyandsidetoc2">
<div class="wrap-collabsible">
  <input id="collapsible" class="toggle" type="checkbox" style="opacity:0;">
  <label for="collapsible" class="lbl-toggle"><p class="text">Software Engineering Response</p></label>
  <div class="collapsible-content">
    <div class="content-inner">
<div class="sidetoccontainer2">


<nav class="sidetoc2">




<div class="sidetoccontents2">

<p class="text">
<a href="main.html" class="linkhome" >
Home</a>
</p>

<p class="text">
<a href="Program-Name.html#autosec-7" class="tocchapter" >
Program Name</a>
</p>


<p class="text">
<a href="Program-Name.html#autosec-9" class="tocsection" >
Executive summary</a>
</p>


<p class="text">
<a href="Business-Design.html#autosec-18" class="tocchapter" >
Business Design</a>
</p>


<p class="text">
<a href="Requirements-Baseline.html#autosec-21" class="tocchapter" >
Requirements Baseline</a>
</p>


<p class="text">
<a href="Physical-properties-edge-plasma.html#autosec-24" class="tocsection" >
Physical properties of the edge plasma</a>
</p>


<p class="text">
<a href="Engineering-Requirements-Baseline.html#autosec-33" class="tocsection" >
Engineering Requirements Baseline</a>
</p>


<p class="text">
<a href="Use-Cases.html#autosec-41" class="tocsection" >
Use Cases</a>
</p>


<p class="text">
<a href="General-Remarks.html#autosec-48" class="tocsection" >
General Remarks</a>
</p>


<p class="text">
<a href="Technical-Specification.html#autosec-51" class="tocchapter" >
Technical Specification</a>
</p>


<p class="text">
<a href="Technical-Specification.html#autosec-53" class="tocsection" >
Response to Tokamak Science Division</a>
</p>


<p class="text">
<a href="Order-magnitude-estimates-tokamak-edge-modelling.html#autosec-96" class="tocsection" >
Order-of-magnitude estimates for tokamak edge modelling</a>
</p>


<p class="text">
<a href="Software-Engineering-Response.html#autosec-99" class="tocsection" >
Software Engineering Response</a>
</p>


<p class="text">
<a href="Generating-Names-Variables.html#autosec-116" class="tocsection" >
Generating Names for Variables</a>
</p>


<p class="text">
<a href="Design-Justification-File.html#autosec-121" class="tocchapter" >
Design Justification File</a>
</p>


<p class="text">
<a href="Design-Justification-File.html#autosec-123" class="tocsection" >
UKAEA (Internal) Reports</a>
</p>


<p class="text">
<a href="Design-Definition-File.html#autosec-132" class="tocchapter" >
Design Definition File</a>
</p>


<p class="text">
<a href="Design-Definition-File.html#autosec-134" class="tocsection" >
Design specification</a>
</p>


<p class="text">
<a href="Objects-classes.html#autosec-137" class="tocsection" >
Objects/classes</a>
</p>


<p class="text">
<a href="Execution-sequence.html#autosec-148" class="tocsection" >
Execution sequence</a>
</p>


<p class="text">
<a href="Design-patterns.html#autosec-158" class="tocsection" >
Design patterns</a>
</p>


<p class="text">
<a href="Management-File.html#autosec-162" class="tocchapter" >
Management File</a>
</p>


<p class="text">
<a href="Introduction.html#autosec-165" class="tocsection" >
Introduction</a>
</p>


<p class="text">
<a href="Management.html#autosec-168" class="tocsection" >
Management</a>
</p>


<p class="text">
<a href="ExCALIBUR-Project-NEPTUNE-Charter.html#autosec-177" class="tocsection" >
<span class="textsc">E</span>x<span class="textsc">CALIBUR</span> Project <span class="textsc">NEPTUNE</span> Charter</a>
</p>


<p class="text">
<a href="Maintenance-File.html#autosec-180" class="tocchapter" >
Maintenance File</a>
</p>


<p class="text">
<a href="Operational-Documentation.html#autosec-183" class="tocchapter" >
Operational Documentation</a>
</p>


<p class="text">
<a href="Operational-Documentation.html#autosec-185" class="tocsection" >
Documentation Generally</a>
</p>


<p class="text">
<a href="Developer-Manual.html#autosec-189" class="tocsection" >
Developer Manual</a>
</p>


<p class="text">
<a href="User-Manual.html#autosec-198" class="tocsection" >
User Manual</a>
</p>


<p class="text">
<a href="User-Manual.html#autosec-200" class="tocsection" >
Feedback and Communication</a>
</p>


<p class="text">
<a href="Proxyapps.html#autosec-203" class="tocchapter" >
Proxyapps</a>
</p>


<p class="text">
<a href="Nektar-Driftwave.html#autosec-206" class="tocsection" >
Nektar-Driftwave</a>
</p>


<p class="text">
<a href="Nektar-Diffusion.html#autosec-209" class="tocsection" >
Nektar-Diffusion</a>
</p>


<p class="text">
<a href="Nektar-1D-SOL.html#autosec-212" class="tocsection" >
Nektar-1D-SOL</a>
</p>


<p class="text">
<a href="FabNEPTUNE.html#autosec-215" class="tocsection" >
FabNEPTUNE</a>
</p>


<p class="text">
<a href="Moment-Kinetics.html#autosec-218" class="tocsection" >
Moment_Kinetics</a>
</p>


<p class="text">
<a href="NESO.html#autosec-221" class="tocsection" >
NESO</a>
</p>


<p class="text">
<a href="Reference-Material.html#autosec-224" class="tocchapter" >
Reference Material</a>
</p>


<p class="text">
<a href="Reference-Material.html#autosec-226" class="tocsection" >
Conventions for Report Writing</a>
</p>


<p class="text">
<a href="Acronyms.html#autosec-235" class="tocsection" >
Acronyms</a>
</p>


<p class="text">
<a href="Symbols.html#autosec-243" class="tocsection" >
Symbols</a>
</p>


<p class="text">
<a href="Videos.html#autosec-254" class="tocchapter" >
Videos</a>
</p>


<p class="text">
<a href="Index-0.html#autosec-257" class="tocchapter" >
Index</a>
</p>


</div>

</nav>

</div>
</div>
</div>
</div>
<div class="bodyandsidetoc"><div class="sidetoccontainer">


<nav class="sidetoc">


<div class="sidetoctitle">

<p>
<span class="sidetocthetitle">main</span>
</p>

<p>
Contents
</p>
</div>


<div class="sidetoccontents">

<p>
<a href="main.html" class="linkhome" >
Home</a>
</p>

<p>
<a href="Program-Name.html#autosec-7" class="tocchapter" >
Program Name</a>
</p>


<p>
<a href="Program-Name.html#autosec-9" class="tocsection" >
Executive summary</a>
</p>


<p>
<a href="Business-Design.html#autosec-18" class="tocchapter" >
Business Design</a>
</p>


<p>
<a href="Requirements-Baseline.html#autosec-21" class="tocchapter" >
Requirements Baseline</a>
</p>


<p>
<a href="Physical-properties-edge-plasma.html#autosec-24" class="tocsection" >
Physical properties of the edge plasma</a>
</p>


<p>
<a href="Engineering-Requirements-Baseline.html#autosec-33" class="tocsection" >
Engineering Requirements Baseline</a>
</p>


<p>
<a href="Use-Cases.html#autosec-41" class="tocsection" >
Use Cases</a>
</p>


<p>
<a href="General-Remarks.html#autosec-48" class="tocsection" >
General Remarks</a>
</p>


<p>
<a href="Technical-Specification.html#autosec-51" class="tocchapter" >
Technical Specification</a>
</p>


<p>
<a href="Technical-Specification.html#autosec-53" class="tocsection" >
Response to Tokamak Science Division</a>
</p>


<p>
<a href="Order-magnitude-estimates-tokamak-edge-modelling.html#autosec-96" class="tocsection" >
Order-of-magnitude estimates for tokamak edge modelling</a>
</p>


<p>
<a href="Software-Engineering-Response.html#autosec-99" class="tocsection" >
Software Engineering Response</a>
</p>


<p>
<a href="Generating-Names-Variables.html#autosec-116" class="tocsection" >
Generating Names for Variables</a>
</p>


<p>
<a href="Design-Justification-File.html#autosec-121" class="tocchapter" >
Design Justification File</a>
</p>


<p>
<a href="Design-Justification-File.html#autosec-123" class="tocsection" >
UKAEA (Internal) Reports</a>
</p>


<p>
<a href="Design-Definition-File.html#autosec-132" class="tocchapter" >
Design Definition File</a>
</p>


<p>
<a href="Design-Definition-File.html#autosec-134" class="tocsection" >
Design specification</a>
</p>


<p>
<a href="Objects-classes.html#autosec-137" class="tocsection" >
Objects/classes</a>
</p>


<p>
<a href="Execution-sequence.html#autosec-148" class="tocsection" >
Execution sequence</a>
</p>


<p>
<a href="Design-patterns.html#autosec-158" class="tocsection" >
Design patterns</a>
</p>


<p>
<a href="Management-File.html#autosec-162" class="tocchapter" >
Management File</a>
</p>


<p>
<a href="Introduction.html#autosec-165" class="tocsection" >
Introduction</a>
</p>


<p>
<a href="Management.html#autosec-168" class="tocsection" >
Management</a>
</p>


<p>
<a href="ExCALIBUR-Project-NEPTUNE-Charter.html#autosec-177" class="tocsection" >
<span class="textsc">E</span>x<span class="textsc">CALIBUR</span> Project <span class="textsc">NEPTUNE</span> Charter</a>
</p>


<p>
<a href="Maintenance-File.html#autosec-180" class="tocchapter" >
Maintenance File</a>
</p>


<p>
<a href="Operational-Documentation.html#autosec-183" class="tocchapter" >
Operational Documentation</a>
</p>


<p>
<a href="Operational-Documentation.html#autosec-185" class="tocsection" >
Documentation Generally</a>
</p>


<p>
<a href="Developer-Manual.html#autosec-189" class="tocsection" >
Developer Manual</a>
</p>


<p>
<a href="User-Manual.html#autosec-198" class="tocsection" >
User Manual</a>
</p>


<p>
<a href="User-Manual.html#autosec-200" class="tocsection" >
Feedback and Communication</a>
</p>


<p>
<a href="Proxyapps.html#autosec-203" class="tocchapter" >
Proxyapps</a>
</p>


<p>
<a href="Nektar-Driftwave.html#autosec-206" class="tocsection" >
Nektar-Driftwave</a>
</p>


<p>
<a href="Nektar-Diffusion.html#autosec-209" class="tocsection" >
Nektar-Diffusion</a>
</p>


<p>
<a href="Nektar-1D-SOL.html#autosec-212" class="tocsection" >
Nektar-1D-SOL</a>
</p>


<p>
<a href="FabNEPTUNE.html#autosec-215" class="tocsection" >
FabNEPTUNE</a>
</p>


<p>
<a href="Moment-Kinetics.html#autosec-218" class="tocsection" >
Moment_Kinetics</a>
</p>


<p>
<a href="NESO.html#autosec-221" class="tocsection" >
NESO</a>
</p>


<p>
<a href="Reference-Material.html#autosec-224" class="tocchapter" >
Reference Material</a>
</p>


<p>
<a href="Reference-Material.html#autosec-226" class="tocsection" >
Conventions for Report Writing</a>
</p>


<p>
<a href="Acronyms.html#autosec-235" class="tocsection" >
Acronyms</a>
</p>


<p>
<a href="Symbols.html#autosec-243" class="tocsection" >
Symbols</a>
</p>


<p>
<a href="Videos.html#autosec-254" class="tocchapter" >
Videos</a>
</p>


<p>
<a href="Index-0.html#autosec-257" class="tocchapter" >
Index</a>
</p>


</div>

</nav>

</div>


<main class="bodycontainer">


<section class="textbody">

 

<!--MathJax customizations:-->


<div class="hidden">

\(\newcommand{\footnotename}{footnote}\)

\(\def \LWRfootnote {1}\)

\(\newcommand {\footnote }[2][\LWRfootnote ]{{}^{\mathrm {#1}}}\)

\(\newcommand {\footnotemark }[1][\LWRfootnote ]{{}^{\mathrm {#1}}}\)

\(\let \LWRorighspace \hspace \)

\(\renewcommand {\hspace }{\ifstar \LWRorighspace \LWRorighspace }\)

\(\newcommand {\mathnormal }[1]{{#1}}\)

\(\newcommand \ensuremath [1]{#1}\)

\(\newcommand {\LWRframebox }[2][]{\fbox {#2}} \newcommand {\framebox }[1][]{\LWRframebox } \)

\(\newcommand {\setlength }[2]{}\)

\(\newcommand {\addtolength }[2]{}\)

\(\newcommand {\setcounter }[2]{}\)

\(\newcommand {\addtocounter }[2]{}\)

\(\newcommand {\arabic }[1]{}\)

\(\newcommand {\number }[1]{}\)

\(\newcommand {\noalign }[1]{\text {#1}\notag \\}\)

\(\newcommand {\cline }[1]{}\)

\(\newcommand {\directlua }[1]{\text {(directlua)}}\)

\(\newcommand {\luatexdirectlua }[1]{\text {(directlua)}}\)

\(\newcommand {\protect }{}\)

\(\def \LWRabsorbnumber #1 {}\)

\(\def \LWRabsorbquotenumber &quot;#1 {}\)

\(\newcommand {\LWRabsorboption }[1][]{}\)

\(\newcommand {\LWRabsorbtwooptions }[1][]{\LWRabsorboption }\)

\(\def \mathchar {\ifnextchar &quot;\LWRabsorbquotenumber \LWRabsorbnumber }\)

\(\def \mathcode #1={\mathchar }\)

\(\let \delcode \mathcode \)

\(\let \delimiter \mathchar \)

\(\def \oe {\unicode {x0153}}\)

\(\def \OE {\unicode {x0152}}\)

\(\def \ae {\unicode {x00E6}}\)

\(\def \AE {\unicode {x00C6}}\)

\(\def \aa {\unicode {x00E5}}\)

\(\def \AA {\unicode {x00C5}}\)

\(\def \o {\unicode {x00F8}}\)

\(\def \O {\unicode {x00D8}}\)

\(\def \l {\unicode {x0142}}\)

\(\def \L {\unicode {x0141}}\)

\(\def \ss {\unicode {x00DF}}\)

\(\def \SS {\unicode {x1E9E}}\)

\(\def \dag {\unicode {x2020}}\)

\(\def \ddag {\unicode {x2021}}\)

\(\def \P {\unicode {x00B6}}\)

\(\def \copyright {\unicode {x00A9}}\)

\(\def \pounds {\unicode {x00A3}}\)

\(\let \LWRref \ref \)

\(\renewcommand {\ref }{\ifstar \LWRref \LWRref }\)

\( \newcommand {\multicolumn }[3]{#3}\)

\(\require {textcomp}\)

\(\newcommand {\intertext }[1]{\text {#1}\notag \\}\)

\(\let \Hat \hat \)

\(\let \Check \check \)

\(\let \Tilde \tilde \)

\(\let \Acute \acute \)

\(\let \Grave \grave \)

\(\let \Dot \dot \)

\(\let \Ddot \ddot \)

\(\let \Breve \breve \)

\(\let \Bar \bar \)

\(\let \Vec \vec \)

</div>

<p>
<!--................................-->
<h4 id="autosec-98">Software Engineering Response</h4>
<a id="main-autopage-98"></a>
<a id="main-autofile-10"></a> <a id="sec:TS_sw_response"></a>
<!--................................-->
<h4 id="autosec-99"></h4>
<a id="main-autopage-99"></a>


<p>
The above scientific response&nbsp;Section&nbsp;<a href="Technical-Specification.html#sec:response_physics"></a> indicates that the <span class="textsc">NEPTUNE</span> suite will have the capability to describe the tokamak edge in a
comprehensive set of levels of detail using a large range of possibly heterogeneous computer hardware, will be straightforwardly modifiable to include additional physical effects, and will aim to include under all circumstances, the level of error in computed results.
Evidently, eveloping the suite represents a major challenge to current software engineering practices thanks to its scientific difficulty as indicated in Section&nbsp;<a href="Order-magnitude-estimates-tokamak-edge-modelling.html#sec:cg"></a>, and
perhaps less obviously, its scientific <em>complexity</em> due to the need to treat large numbers of atomic and molecular species, descending to the level of isotopes with a range of charge states and electronic excitations.
</p>

<p>
The last makes <span class="textsc">NEPTUNE</span> a significantly harder development than the BOUT++ code discussed in Section&nbsp;<a href="Technical-Specification.html#sec:response_physics"></a>. The difficulty motivated
studies of software engineering practices outside as well as in the scientific context. The studies of scientific work are summarised in reports concerning frameworks, scientific UQ etc. Ideas from these studies are combined with non-technical works such as
Hewitt&nbsp;ref. [<a href="Index-0.html#LWR-ht-cite.0@hewitt">27</a>] and Sommerville&nbsp;ref. [<a href="Index-0.html#LWR-ht-cite.0@sommerville">28</a>] and summarised in the report&nbsp;ref. [<a
href="Index-0.html#LWR-ht-cite.0@y2d34">1</a>].
</p>

<p>
The outcome is the present report and website, which augment the procedures of Dudson and BOUT++ collaborators&nbsp;ref. [<a href="Index-0.html#LWR-ht-cite.0@y3re314">3</a>] to govern the development of <span
class="textsc">NEPTUNE</span>. Management aspects of the development are treated in Section&nbsp;<a href="Introduction.html#sec:MGT_intro"></a> and operational aspects in Section&nbsp;<a
href="Operational-Documentation.html#sec:OP_MGT"></a>. The remainder of this section focusses on the generic details of a software implementation, the so-called non-functional aspects, with BOUT++ instructions augmented to allow for the greater
complexity of <span class="textsc">NEPTUNE</span>, following the D3.3 reports&nbsp;ref. [<a href="Index-0.html#LWR-ht-cite.0@y2d33">29</a>], here with&nbsp;Section&nbsp;<a
href="Generating-Names-Variables.html#sec:TS_varnames"></a> adding a way to handle a multitude of variable names to accommodate the much increased number of physical variables.
</p>

<p>
Following D3.3&nbsp;ref. [<a href="Index-0.html#LWR-ht-cite.0@y2d33">29</a>], Section&nbsp;<a href="Software-Engineering-Response.html#sec:TS_considers"></a> discusses high-level constraints on the structure of software. where the
concept of division into packages and modules (which may represent libraries) is promoted. Section&nbsp;<a href="Software-Engineering-Response.html#sec:TS_scistruct"></a> explores the implications of these constraints for <span
class="textsc">NEPTUNE</span>. At the opposite extreme to Section&nbsp;<a href="Software-Engineering-Response.html#sec:TS_considers"></a> and Section&nbsp;<a
href="Software-Engineering-Response.html#sec:TS_scistruct"></a>, Section&nbsp;<a href="Software-Engineering-Response.html#sec:TS_lowlevel"></a> describes the desirable contents for a single module, and Section&nbsp;<a
href="Software-Engineering-Response.html#sec:TS_procio"></a> discusses the question of what best to output when developing software for the Exascale.
</p>
<!--................................-->
<h5 id="autosec-100">General Considerations</h5>
<a id="main-autopage-100"></a>


<a id="sec:TS_considers"></a>

<p>
It is important that individual units of code are manageable and the overall structure is comprehensible, so that developers and users can navigate the codebase and determine where new work is to be located. This simple consideration implies that <span
class="textsc">NEPTUNE</span> software should be divided into units that it will be convenient to refer to as modules, ie. sections of code containing everything necessary to perform one (and only one) aspect of the desired functionality.
</p>

<p>
The suggested content of a module describing a single class in the UML sense (see Section&nbsp;<a href="Software-Engineering-Response.html#sec:TS_lowlevel"></a>, Table&nbsp;<a
href="Software-Engineering-Response.html#tab:TS_umltrans">1</a>) implies a minimum of \(13\)&nbsp;methods described by separate subroutines/functions, with examples extending up to \(50\), although the latter is there regarded as an excessively
large number of methods. Many small software libraries also fall into this size range. Supposing that each subroutine is of a length to fit within one computer window, ie. up to about&nbsp;\(60\)&nbsp;lines, the desirable maximum length of a well-designed
module file is \(30\times 60 = 1\,800\)&nbsp;lines which is a manageable size of file given editing software that remembers on restart, the last line accessed (so that it possible to return immediately to a particular subroutine). The magnitude of the D3.3
exercise follows from the fact that comparable software packages probably of somewhat lesser complexity than <span class="textsc">NEPTUNE</span> written in high level languages such as C++ range in size up to&nbsp;\(1\,000\,000\) lines. Clearly
\(400\)&nbsp;separate modules is too unwieldy, and there is a need to organise further into packages which might contain in turn \(10\)-\(50\) modules. As a way of providing further indication to developers, it is helpful to talk of packages as being arranged
into layers, as discussed in ref&nbsp;ref. [<a href="Index-0.html#LWR-ht-cite.0@y2re333">30</a>, §§&#x202f;2.4, 3.2], see Figure&nbsp;<a href="Software-Engineering-Response.html#fig:hierarchygroup">4</a>. Then, as prefigured in
ref&nbsp;ref. [<a href="Index-0.html#LWR-ht-cite.0@y2re333">30</a>, Annex&nbsp;A], it should be possible to encapsulate the necessary complexity in one, albeit large diagram.
</p>
<figure id="autoid-5" class="figure ">
<div class="center">

<p>

<a href="./png/hierarchygroup.png" target="_blank" ><img
    src="./png/hierarchygroup.png"
    style="
    width:500pt;
    "
    class="inlineimage"
    alt="(image)"
></a>
</p>
</div>

<div class="figurecaption">
<p>
Figure 4:&nbsp;Sketch of relationship between units of large code. <a id="fig:hierarchygroup"></a>
</p>
</div>

</figure>
<!--................................-->
<h5 id="autosec-102">Considerations for Scientific Software</h5>
<a id="main-autopage-102"></a>


<a id="sec:TS_scistruct"></a>
<!--................................-->
<h6 id="autosec-103">Structural Considerations</h6>
<a id="main-autopage-103"></a>


<a id="sec:TS_structure"></a>

<p>
In both refs&nbsp;refs. [<a href="Index-0.html#LWR-ht-cite.0@y1re331">31</a>, <a href="Index-0.html#LWR-ht-cite.0@y2re332">32</a>], a figure from Dubey&nbsp;et&nbsp;al&nbsp;ref. [<a
href="Index-0.html#LWR-ht-cite.0@Du16Idea">33</a>] is reproduced that illustrates how scientific software may be developed by beginning with an “infrastructure" capability into which initially exploratory scientific software is integrated as its worth is
established. Unfortunately for <span class="textsc">NEPTUNE</span>, it is not clear initially what aspects of the infrastructure will be durable and stable, although once the software is more mature, Dubey&nbsp;et&nbsp;al’s methodology appears
attractive.
</p>

<p>
The literature referenced in ref&nbsp;ref. [<a href="Index-0.html#LWR-ht-cite.0@y2re333">30</a>] indicates that scientific software should be produced by aggregation, but is less helpful as to what is to be aggregated, ie. the modular decomposition as to
what should constitute a single module etc.
</p>

<p>
Since the <span class="textsc">NEPTUNE</span> development will proceed as a series of proxyapps, there is a chance to refine and redefine an initial modular decomposition with each successive proxyapp, recording the results as a UML structure
diagram. When generating the corresponding sequence diagram (ie. procedural description), the proxyapp-based units should be preserved to facilitate the use of the simpler ones as surrogates for the later more complex proxyapps.
</p>

<p>
To help understand the aggregation of the software, it should be layered in the obvious manner, with the higher layers corresponding to greater numbers of aggregated objects. It is also expected to be useful to classify the modules. The modules should be
arranged into a relatively small number of packages according to, eg. whether they treat particle generation, matrix coefficient calculation, the main matrix solution, or visualisation.
</p>
<!--................................-->
<h6 id="autosec-104">Interactions between Modules</h6>
<a id="main-autopage-104"></a>


<a id="sec:TS_modulint"></a>

<p>
Concerning logical interconnections between modules, the use of a directed, acyclic graph&nbsp;(DAG) structure might be thought mandatory, particularly to process the input data in order to specify coherently the construction of the elements of the solution
matrix. However, as prefigured in ref&nbsp;ref. [<a href="Index-0.html#LWR-ht-cite.0@y2re333">30</a>] for the gyrokinetics code <span class="textsc">GS2</span>, the tightly coupled nature of the central edge physics problem means that input is
more about gathering <em>all</em> the data, for only at that point can fields be computed and only after that may matrix coefficients be computed.
</p>

<p>
(TODO) “Information hiding principle" eg. input data module “hides" information about how this is done from the calculation module: it just passes along parameters in an agreed format. Can extend this idea on to every level - eg. Parnas advocates hiding the
hardware from the code - cf. performance portability. Such modularity enables work to be efficiently assigned to a programmer or group.
</p>
<!--................................-->
<h5 id="autosec-105">Design of a Module</h5>
<a id="main-autopage-105"></a>


<a id="sec:TS_lowlevel"></a>
<!--................................-->
<h6 id="autosec-106">Notation</h6>
<a id="main-autopage-106"></a>


<p>
UML nomenclature is preferred herein, for which Table&nbsp;<a href="Software-Engineering-Response.html#tab:TS_umltrans">1</a> provides a limited translation into C++ and Object Fortran.
</p>

<figure id="autoid-6" class="table ">
<div class="center">

<div class="figurecaption">
<p>
Table 1:&nbsp;UML interpreted as Object Fortran and C++ <a id="tab:TS_umltrans"></a>
</p>
</div>
<table>

<tr class="hline">
<td class="tdp tvertbarl tvertbarr" style="border-left:        1px solid black; border-right:     1px solid black">

<p>
UML
</p>
</td>
<td class="tdp tvertbarr" style="border-right:       1px solid black">

<p>
Fortran 2003
</p>
</td>
<td class="tdp tvertbarr" style="border-right:       1px solid black">

<p>
C++
</p>
</td>
</tr>


<tr class="hline">
<td class="tdp tvertbarl tvertbarr" style="border-left:        1px solid black; border-right:     1px solid black">

<p>
Class
</p>
</td>
<td class="tdp tvertbarr" style="border-right:       1px solid black">

<p>
Derived type
</p>
</td>
<td class="tdp tvertbarr" style="border-right:       1px solid black">

<p>
Class
</p>
</td>
</tr>


<tr>
<td class="tdp tvertbarl tvertbarr" style="border-left:        1px solid black; border-right:     1px solid black">

<p>
Part
</p>
</td>
<td class="tdp tvertbarr" style="border-right:       1px solid black">

<p>
-
</p>
</td>
<td class="tdp tvertbarr" style="border-right:       1px solid black">

<p>
Component
</p>
</td>
</tr>


<tr>
<td class="tdp tvertbarl tvertbarr" style="border-left:        1px solid black; border-right:     1px solid black">

<p>
Attribute
</p>
</td>
<td class="tdp tvertbarr" style="border-right:       1px solid black">

<p>
Component
</p>
</td>
<td class="tdp tvertbarr" style="border-right:       1px solid black">

<p>
Data member
</p>
</td>
</tr>


<tr>
<td class="tdp tvertbarl tvertbarr" style="border-left:        1px solid black; border-right:     1px solid black">

<p>
Method
</p>
</td>
<td class="tdp tvertbarr" style="border-right:       1px solid black">

<p>
Type-bound procedure
</p>
</td>
<td class="tdp tvertbarr" style="border-right:       1px solid black">

<p>
Virtual Member function
</p>
</td>
</tr>


<tr>
<td class="tdp tvertbarl tvertbarr" style="border-left:        1px solid black; border-right:     1px solid black">

<p>
Feature
</p>
</td>
<td class="tdp tvertbarr" style="border-right:       1px solid black">

<p>
Component and Type-bound procedure
</p>
</td>
<td class="tdp tvertbarr" style="border-right:       1px solid black">

<p>
Data and Virtual Member function
</p>
</td>
</tr>


<tr>
<td class="tdp tvertbarl tvertbarr" style="border-left:        1px solid black; border-right:     1px solid black">

<p>
Structured class
</p>
</td>
<td class="tdp tvertbarr" style="border-right:       1px solid black">

<p>
Extended type
</p>
</td>
<td class="tdp tvertbarr" style="border-right:       1px solid black">

<p>
Subclass
</p>
</td>
</tr>


<tr>
<td class="tdp tvertbarl tvertbarr" style="border-left:        1px solid black; border-right:     1px solid black">

<p>
Specialisation
</p>
</td>
<td class="tdp tvertbarr" style="border-right:       1px solid black">

<p>
Class
</p>
</td>
<td class="tdp tvertbarr" style="border-right:       1px solid black">

<p>
Dynamic Polymorphism
</p>
</td>
</tr>


<tr>
<td class="tdp tvertbarl tvertbarr" style="border-left:        1px solid black; border-right:     1px solid black">

<p>
Generalisation
</p>
</td>
<td class="tdp tvertbarr" style="border-right:       1px solid black">

<p>
Generic interface
</p>
</td>
<td class="tdp tvertbarr" style="border-right:       1px solid black">

<p>
Function overloading
</p>
</td>
</tr>


<tr class="hline">
<td class="tdp">

</td>
<td class="tdp">

</td>
<td class="tdp">

</td>
</tr>

</table>

<p>
Further insight into UML terminology may be gained from the description of the patterns in refs&nbsp;<a id="main-autopage-108"></a>refs. [<a href="Index-0.html#LWR-ht-cite.0@y2re333">30</a>, <a
href="Index-0.html#LWR-ht-cite.0@y2re332">32</a>].
</p>
</div>

</figure>
<!--................................-->
<h6 id="autosec-109">Module design</h6>
<a id="main-autopage-109"></a>


<p>
The focus herein is the structure within a module. Specifically, the module describes a single class or object (strictly speaking in UML terms, objects are instances of a class), which is fundamental in that it is defined without use of aggregation. Tthe software -
consistent with Clerman and Spector&nbsp;ref. [<a href="Index-0.html#LWR-ht-cite.0@clermanspector">34</a>, §&#x202f;11] - that is promoted by Arter et al&nbsp;ref. [<a href="Index-0.html#LWR-ht-cite.0@fprog">35</a>] for an
object-oriented language, recognises two sizes of fundamental class and it is easier to start by considering the smaller, denoted smallobj_m.
</p>

<p>
Module smallobj_m does not have a separate attributes file, but will typically still use or access three or more yet more fundamental classes, namely
</p>
<ul style="list-style-type:none">

<li>
<p>
• log_m for logging errors or warnings in code execution, and checkpointing values of selected variables
</p>


</li>
<li>


<p>
• const_numphys_h for numerical values of important mathematical and physical constants relevant to plasma physics
</p>


</li>
<li>


<p>
• const_kind_m to specify precision of representation of real and integer values, together with formatting to be used for their output (in fact contains no executable code)
</p>


</li>
<li>


<p>
• date_time_m to return the date and time in either a verbose or minimal format
</p>


</li>
<li>


<p>
• misc_m to form miscellaneous operations found to be common to many modules
</p>
</li>
</ul>

<p>
In outline, the methods or operations associated with smallobj allow data to be read from a named file, used in the construction of an object, and output to disc file. The file is given a numeric identifier&nbsp;ninso (file&nbsp;unit) when it is opened. Data
used to construct the object forms a single namelist block, viz. a list of arbitrary code variables that may (or not) be assigned values in the input file using a attribute-value notation. Namelist variables should have long names that promote a good user
interface, and be given default values in case they are not input. The style encourages checking that inputs have acceptable values, for example lie in expected ranges, but there is no equivalent of eg. the Cerberus Python data validation package&nbsp;ref. [<a
href="Index-0.html#LWR-ht-cite.0@cerberuswebsite">36</a>], users must explicitly code checks and calls to log_m if the values are questionable or erroneous. (It is hoped that this can be automated based on a <span class="latexlogofont"><span
class="latexlogo">L<span class="latexlogosup">a</span>T<span class="latexlogosub">e</span>X</span></span> table describing input symbols. After successful checks, the values in the namelist are copied into the data type sonumerics_t,
whence it is supposed that a single subroutine then instantiates the smallobj_t object. Another routine performs output of this object, either to a directly specified file unit, or to the standard output by default, in the simple text format of a variable name
followed by its value on the following line. As might be expected, there are also routines to ‘delete’ the object, ie. to deallocate any constituent arrays, and to close the input file. The precise list of member functions (or methods in the UML nomenclature) is
</p>
<ul style="list-style-type:none">

<li>
<p>
• initfile, open input file
</p>


</li>
<li>


<p>
• readcon, read data from input file
</p>


</li>
<li>


<p>
• generic, generic subroutine to instantiate object
</p>


</li>
<li>


<p>
• write, write out object to standard output, or to file opened by another object
</p>


</li>
<li>


<p>
• delete, delete object
</p>


</li>
<li>


<p>
• close, close input file
</p>
</li>
</ul>

<p>
Module bigobj_m has a separate file for its attributes (<em>aka</em> namespace), which it will normally still use or access like the yet more fundamental objects listed for smallobj_m. However the data types defined in bigobj_h are of the same kind as those in
smallobj_m, viz. bonumerics_t to hold input data which is used to define bigobj_t by calling the solve subroutine (rather than the subroutine generic in the case of smallobj_m). Apart from this last exception, the methods in bigobj_m are a superset of those
in smallobj_m. The additional methods recognise that instantiation may involve more than one routine and in particular may involve use of a specially defined function fn, demonstrating the STRATEGY Pattern or possibly TEMPLATE Pattern. This function
may be determined by a formula identified in the input, giving the option for a developer or determined user of adding their own code to define a new function. The range of allowable outputs is much extended. Thus there is a separate routine provided for
output to the log file using what will probably be a lengthy list of calls to log_value_m. More likely to be useful is a routine to open an .out file on a file unit given the number&nbsp;noutbo on opening, which becomes the default unit for writing out the object
in bigobj_write. There are also provided separate skeleton routines intended to provide output in a format suitable respectively for visualisation by <span class="textsc">gnuplot</span> and <span class="textsc">ParaView</span>, and of course
routines to close files and delete the object. The precise list of member functions for bigobj_m is as follows where those also found in smallobj_m are enclosed in parenthesis:
</p>
<ul style="list-style-type:none">

<li>
<p>
• (initfile), open input file
</p>


</li>
<li>


<p>
• (readcon), read data from input file
</p>


</li>
<li>


<p>
• solve, generic subroutine to manage instantiation of object
</p>


</li>
<li>


<p>
• userdefined, user-defined method or function
</p>


</li>
<li>


<p>
• fn, general external function call
</p>


</li>
<li>


<p>
• dia, write object diagnostics to log file
</p>


</li>
<li>


<p>
• initwrite, open new file, making up name which defaults to having .out suffix
</p>


</li>
<li>


<p>
• (write), write out object to standard output, or to file opened by bigobj
</p>


</li>
<li>


<p>
• writeg, write out object suitable for visualisation by <span class="textsc">gnuplot</span>
</p>


</li>
<li>


<p>
• writev, write out object suitable for visualisation by <span class="textsc">ParaView</span>
</p>


</li>
<li>


<p>
• (delete), delete object
</p>


</li>
<li>


<p>
• (close), close input file
</p>


</li>
<li>


<p>
• closewrite, close write file opened by initwrite
</p>
</li>
</ul>

<p>
Thus the skeleton object is defined by a formula plus data input from disc, and since both are saved internally as features, the instantiation may be deferred as necessary, so-called ‘lazy initialisation’. It will be noticed that other variables in bigobj_m such as unit
number are hidden, ie. cannot be accessed by other modules. In fact a common addition to the default modules is a method function getunit that returns ninbo, illustrating the approved way of accessing such data.
</p>

<p>
The reason for the emphasis on input and output from and to disc (I/O) is to facilitate the construction of a test harness for an objects in the style of bigobj_m, and indeed the aggregations of such objects. The use of “attribute-value" in I/O gives flexibility to
the developer, since new variables may be added without the need to modify existing input files or output processing. Output processing is further discussed in Section&nbsp;<a href="Software-Engineering-Response.html#sec:TS_procio"></a>.
</p>
<!--................................-->
<h5 id="autosec-110">Processing Module Output</h5>
<a id="main-autopage-110"></a>


<a id="sec:TS_procio"></a>

<p>
The number of I/O subroutines can be criticised. For many testing purposes an interactive debugger is adequate, and for most others that one output file is sufficient provided it is in a attribute-value format such as JavaScript Object Notation&nbsp;(JSON) or
in a self-documenting format such as the Network Common Data Form&nbsp;(netCDF), to be interpreted by any suitable visualisation software.
</p>

<p>
The problem with scientific software, worse at Exascale, is the volume of data to be handled so that the ability to visualise large arrays as well as large numbers of small arrays is essential (no debugger as far as is known has such a visualisation feature).
Moreover, the actionable aspect of <span class="textsc">NEPTUNE</span> further means that any postprocessing of a generic file must also be carefully performed. Thus while a generic output file could be processed by say Linux awk script into a form
suitable for <span class="textsc">gnuplot</span> processing, this gives rise to a need for providing documentation and provenance for the script, which is at minimum a nuisance. Worse is the risk that the amount of data to be processed may be so large
as to lead to significant delay and maybe even system or other issues not handled well if at all by the script, all of which may be extremely time-consuming to resolve. Other conversion software may not be available or properly implemented on the target machine.
Thus even for debugging purposes, it seems desirable that as much as possible of the processing is done within the main code, and for production runs, output in a format directly readable by say&nbsp;<span class="textsc">ParaView</span> should also
speed the post-processing. Since netCDF may be read directly by&nbsp;<span class="textsc">ParaView</span>, this is recommended.
</p>
<!--................................-->
<h5 id="autosec-111">Code licence and availability</h5>
<a id="main-autopage-111"></a>


<a id="sec:lic"></a>

<p>
Code should be made available to collaborators at the earliest opportunity, to maintain close alignment between groups.
</p>

<ul style="list-style-type:none">

<li>
<p>
• To minimise friction and unnecessary legal restrictions on combining code components, a common, MIT licence has been adopted. This may be regarded as equivalent to the BSD3 licence in the <span class="textsc">NEPTUNE</span>
Charter, see&nbsp;Section&nbsp;<a href="ExCALIBUR-Project-NEPTUNE-Charter.html#sec:charter"></a>.
</p>
</li>
<li>


<p>
• Code development should be carried out in public repositories. The benefits of minimising delay to code use, feedback and peer review, outweigh any potential for embarrassment or code misuse.
</p>
</li>
</ul>
<!--................................-->
<h5 id="autosec-112">Code style</h5>
<a id="main-autopage-112"></a>


<a id="sec:style"></a>

<p>
There are many different code styles, each of which have their proponents, and can be debated at length. While everyone has their own favourite style, it seems likely that the choice of style makes little difference to objective quality or productivity. Anecdotal
experience and experience from the gaming world in developing large, complicated packages (eg. Gregory&nbsp;ref. [<a href="Index-0.html#LWR-ht-cite.0@gregory">37</a>, §&#x202f;3]), indicate however that it is very important that there is a
well-defined code style and that developers stick to it, since a mixture of styles in a code base adds unnecessary mental load and overhead. The ultimate choice is down to the project Lead, under advice from major code contributors, leading websites and
textbooks, eg. in the case of the C++ language, the C++ core guidelines&nbsp;ref. [<a href="Index-0.html#LWR-ht-cite.0@cppguidelines">38</a>] and more compactly Stroustrop’s “Tour of of C++"&nbsp;ref. [<a
href="Index-0.html#LWR-ht-cite.0@stroustroptour">39</a>].
</p>

<p>
The following style choices have been made and efforts will be made to enforce them in <span class="textsc">NEPTUNE</span> repositories.
</p>
<ul style="list-style-type:none">

<li>
<p>
1. Formatting of C++ and Python will follow the style used by Nektar++
</p>
<ul style="list-style-type:none">

<li>
<p>
• Developer tools: Code formatting tools should be used to automatically format code. For C++ clang-tidy&nbsp;ref. [<a href="Index-0.html#LWR-ht-cite.0@clang-tidywebsite">40</a>] should be used while, and for Python Black&nbsp;ref.
[<a href="Index-0.html#LWR-ht-cite.0@blackwebsite">41</a>] is recommended. Similar tools should be chosen for any other languages adopted by the project.
</p>
</li>
<li>


<p>
• Enforcement: Tests run on pull requests and code pushes to the shared repository should include code formatting: The automated formatter is applied to the code, and if the output is different from the input then the code is incorrectly formatted,
and the test fails.
</p>
</li>
<li>


<p>
• Documentation: <span class="latexlogofont"><span class="latexlogo">L<span class="latexlogosup">a</span>T<span class="latexlogosub">e</span>X</span></span> or Markdown should be used and conventions enforced regarding
a maximum line length of \(120\)&nbsp;characters, restriction to ASCII character set, abbreviations, hyphenation, capitalisation, minimal use of&nbsp;‘z’, and use of fonts to denote code names. Usage of <span
class="textsc">LaTeX2HTML</span> implies a restricted set of packages.
</p>
<p>


</p>
</li>
</ul>
</li>
<li>

<p>
2. Naming
</p>
<p>
Naming of code components (modules, classes, functions, variables etc.) is less easy to enforce automatically than formatting, but is arguably essential for <span class="textsc">NEPTUNE</span>, because of the complexity of the physical processes to be
modelled. Widely applicable good practices to be adopted are as follows:
</p>
<ul style="list-style-type:none">

<li>
<p>
• Consistency: Whatever convention is used, stick to it.
</p>


</li>
<li>


<p>
• Be descriptive: Names should be meaningful, not cryptic, and need not be very short, although brevity consistent with frequency of usage is recommended.
</p>
<ul style="list-style-type:none">


<li>
<p>
– Variable names, used only on input, might consist of \(3-4\) words primarily describing the variable, using ‘pot-hole’ convention
</p>


</li>
<li>


<p>
– Loop or indexing variables, might consist of single characters, eg. i, j, k
</p>


</li>
<li>


<p>
– Mathematical symbols, eg. those defined in Section&nbsp;<a href="Symbols.html#sec:symbol"></a>, should be converted from <span class="latexlogofont"><span class="latexlogo">L<span
class="latexlogosup">a</span>T<span class="latexlogosub">e</span>X</span></span> into variable names using the conventions of Section&nbsp;<a href="Reference-Material.html#sec:conv"></a>.
</p>


</li>
<li>


<p>
– Where mathematical symbols are converted for use in larger expressions, the mathematical expression should be in the documentation within or linked to the code.
</p>
</li>
</ul>
</li>
<li>


<p>
• Generally prefer nouns for variables, and verbs for functions
</p>
</li>
</ul>
<p>
Given a need to mix with Object Fortran, which is not case-sensitive, the ‘pot-hole’ convention for naming C++ variables, ie. separating name elements by underscores, is recommended.
</p>
<p>
Occasionally a convention is used where the name includes a part which indicates the type of the variable. For example, the JSF style for C++&nbsp;ref. [<a href="Index-0.html#LWR-ht-cite.0@pittwhitely">42</a>, §&#x202f;6.6] recommends that
pointer names begin&nbsp;‘p_’ and that private or protected (‘member’) variables should have names beginning with&nbsp;‘m’. In general naming conventions are probably not essential, since the type can be read in the code, and modern IDEs will easily
provide this information to the developer. Nonetheless, there is no objection to employing a convention, and <span class="textsc">NEPTUNE</span> recommend the following one for coders who wish to do so.
</p>
<p>
For C++, based on the recommendations of the book “Professional C++" (eg. ref&nbsp;ref. [<a href="Index-0.html#LWR-ht-cite.0@solterkleper">43</a>, §&#x202f;7], the following prefix strings should be employed: ‘m_’ for member (particularly
useful for indicating scope), ‘p_’ for pointer, ‘s_’ for static, ‘k_’ for constant, ‘f_’ for flag (Boolean value), ‘d_’ for buffers/pointers on an accelerator device, and aggregations thereof, eg. ‘ms_variable’. Use of global variables is deprecated, so the ‘g_’ prefix
should not be used.
</p>
<p>
For Object Fortran naming conventions, Arter&nbsp;et&nbsp;al&nbsp;ref. [<a href="Index-0.html#LWR-ht-cite.0@fprog">35</a>] codifies best practice. It may also be useful to reserve the single letters&nbsp;‘i’, ‘j’, ‘k’ etc. for the names of loop-count
variables. Loop counting should start at unity, consistent with everyday practice, unless there are good reasons for starting at zero or using offset values.
</p>
</li>
</ul>
<!--................................-->
<h5 id="autosec-113">Programming languages</h5>
<a id="main-autopage-113"></a>


<a id="sec:lang"></a>

<p>
A small set of “approved" languages is to be used in the project consistent with the rule of ‘two’ described in Section&nbsp;<a href="Introduction.html#sec:MGT_intro"></a>. This rule covers the high performance code itself and also the input/output,
testing scripts and other infrastructure included in the code repository.
</p>

<p>
Important factors in the choice made included:
</p>
<ul style="list-style-type:none">

<li>
<p>
1. Widespread use. It must be possible for several project members at any one time to understand the language, and be able to maintain the code.
</p>

</li>
<li>

<p>
2. Stability. The code developed will potentially have a long life-span, and there are insufficient resources to continually update code to respond to upstream changes.
</p>

</li>
<li>

<p>
3. Previous usage in HPC and scientific computing. There should be an existing ecosystem of code packages, tutorials, and potential users.
</p>
</li>
</ul>

<p>
The above considerations implied that the following options were extensively discussed.
</p>
<ul style="list-style-type:none">

<li>
<p>
• C++14, Fortran (eg. 2008), C and Python all satisfy the above criteria. For configuration, CMake, Autotools and Bash also qualify.
</p>


</li>
<li>


<p>
• SYCL (building on C++) and Julia are both less widely adopted so far, but both appear to be heading towards satisfying the above criteria and might be considered.
</p>
</li>
</ul>

<p>
The recommended languages are
</p>
<ul style="list-style-type:none">

<li>
<p>
• As higher level DSL : Python and Julia
</p>


</li>
<li>


<p>
• For lower level HPC compatibility/DSL: Kokkos and SYCL
</p>


</li>
<li>


<p>
• General scientific work : the latest versions of C++ and (Object) Fortran, provided they are compatible with pre-existing packages and reliable compilers are available (eg. as of mid-2021 usage of SYCL implies a need for C++17.)
</p>


</li>
<li>


<p>
• For code compilation and linking etc. : CMake
</p>
</li>
</ul>

<p>
Other languages may have technical merits in particular areas, or are being adopted outside scientific computing but not to a significant degree within the community. Use of these languages should be limited to isolated experiments, rather than core components.
If shown to be useful in these experiments, to a level which is worth the additional overhead and risk of maintaining it, then the Lead should consider expanding the list of approved languages, consistent with the ‘rule of two’.
</p>

</section>

</main>

</div>



</body>
</html>
